# Rutube Shorts Bot

Этот проект представляет собой Telegram-бота для скачивания видео из Rutube Shorts, а также для распознавания текста из файлов и работы с ним. Бот поддерживает загрузку видео в различных разрешениях, распознавание текста из изображений и PDF, а также преобразование текста в аудио.

## Функционал

- Скачивание видео из Rutube Shorts.
- Выбор разрешения видео перед загрузкой.
- Распознавание текста из изображений и PDF-файлов.
- Использование ChatGPT для обработки текста (перевод, объяснение, пересказ).
- Преобразование текста в аудио с помощью Google Text-to-Speech (gTTS).

---

## Установка

### 1. Клонирование репозитория

```bash
git clone https://github.com/your-username/Rutube_Shorts_bot.git
cd Rutube_Shorts_bot
```

### 2. Установка зависимостей

Убедитесь, что у вас установлен Python версии 3.9 или выше. Установите зависимости с помощью `pip`:

```bash
pip install -r requirements.txt
```

### 3. Настройка переменных окружения

Создайте файл `.env` в корневой директории проекта и добавьте в него следующие переменные:

```
TELEGRAM_BOT_TOKEN=ваш_токен_бота
```

Получить токен можно через [BotFather](https://core.telegram.org/bots#botfather).

---

## Зависимости

Проект использует следующие библиотеки:

- **python-telegram-bot**: для работы с Telegram API.
- **opencv-python**: для обработки изображений.
- **pytesseract**: для OCR (распознавания текста).
- **fitz (PyMuPDF)**: для работы с PDF.
- **gTTS**: для преобразования текста в аудио.
- **m3u8**: для работы с плейлистами видео.
- **alive-progress**: для отображения прогресса загрузки.
- **dotenv**: для работы с переменными окружения.

---

## Запуск

1. Убедитесь, что все зависимости установлены и файл `.env` настроен.
2. Запустите бота:

```bash
python text_rutube.py
```

---

## Использование

1. Запустите бота в Telegram с помощью команды `/start`.
2. Выберите действие из предложенного меню:
   - **Скачать Rutube Shorts**: отправьте ссылку на видео, выберите разрешение и дождитесь загрузки.
   - **Распознать текст**: отправьте файл (PDF или изображение) для распознавания текста.
   - **Распознать с помощью ChatGPT**: используйте GPT для обработки текста.
   - **Преобразовать текст в аудио**: преобразуйте текст в аудиофайл.

---

## Структура проекта

- **text_rutube.py**: Основной файл бота с обработкой команд и сообщений.
- **rutube.py**: Модуль для работы с видео из Rutube.
- **bot.py**: Упрощённая версия бота для скачивания видео.
- **`requirements.txt`**: Список зависимостей.
- **`files/`**: Директория для временного хранения файлов.
- **`downloads/`**: Директория для загрузки видео.

---

## Примечания

- Для работы OCR (pytesseract) необходимо установить Tesseract OCR. Инструкции по установке можно найти [здесь](https://github.com/tesseract-ocr/tesseract).
- Убедитесь, что у вас есть доступ к API ChatGPT, если вы используете функции, связанные с GPT.

---

## Лицензия

Этот проект распространяется под лицензией MIT. Вы можете свободно использовать, изменять и распространять его с указанием авторства.
